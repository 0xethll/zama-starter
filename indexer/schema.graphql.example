# ============ Factory Events ============
type ConfidentialTokenFactory_TokenWrapped @entity {
  id: ID!
  erc20Token: String!
  confidentialToken: String!
  name: String!
  symbol: String!
  creator: String!
  createdAt: BigInt!
  blockNumber: BigInt!
  transactionHash: String!
}

# ============ Token Registry ============
type ConfidentialTokenRegistry @entity {
  id: ID!  # confidentialToken address
  erc20Token: String!
  name: String!
  symbol: String!
  creator: String!
  createdAt: BigInt!
  totalTransfers: BigInt!
  totalUnwrapRequests: BigInt!
}

# ============ ERC7984 Events ============
type ConfidentialERC20Wrapper_ConfidentialTransfer @entity {
  id: ID!
  contractAddress: String!
  from: String!
  to: String!
  amount: String!
  blockNumber: BigInt!
  timestamp: BigInt!
  transactionHash: String!
}

type ConfidentialERC20Wrapper_UnwrapRequest @entity {
  id: ID!
  contractAddress: String!
  burntAmount: String!
  recipient: String!
  requestBlockNumber: BigInt!
  requestTransactionHash: String!
  requestTimestamp: BigInt!
  isFinalized: Boolean!
  cleartextAmount: BigInt
  finalizedBlockNumber: BigInt
  finalizedTransactionHash: String
  finalizedTimestamp: BigInt
}
